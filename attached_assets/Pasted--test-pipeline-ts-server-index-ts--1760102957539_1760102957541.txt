π”¬ λ‹¨κ³„λ³„ κ°λ° λ° κ²€μ¦ μ „λµ: test-pipeline.ts μ¤ν¬λ¦½νΈ ν™μ©
κΈ°μ΅΄μ μ›Ή μ„λ²„ μ‹¤ν–‰ λ΅μ§(server/index.ts)κ³Ό λ³„κ°λ΅, μ¤μ§ νμ΄ν”„λΌμΈμ κ° λ‹¨κ³„λ¥Ό ν…μ¤νΈν•κΈ° μ„ν• λ³„λ„μ μ¤ν¬λ¦½νΈ νμΌμ„ λ§λ“λ” κ²ƒμ΄ ν•µμ‹¬μ…λ‹λ‹¤.

1. ν…μ¤νΈμ© μ¤ν¬λ¦½νΈ νμΌ μƒμ„±
μ„λ²„ λ””λ ‰ν„°λ¦¬(server/) μ•μ— test-pipeline.ts λΌλ” μƒ νμΌμ„ λ§λ“μ„Έμ”. μ΄ νμΌμ€ μ›Ή μ„λ²„λ¥Ό μ‹¤ν–‰ν•μ§€ μ•κ³ , ν„°λ―Έλ„μ—μ„ μ§μ ‘ μ‹¤ν–‰ν•μ—¬ κ° μ„λΉ„μ¤ λ¨λ“μ μ…μ¶λ ¥μ„ ν™•μΈν•  μ©λ„λ΅ μ‚¬μ©λ©λ‹λ‹¤.

2. λ‹¨κ³„λ³„ ν…μ¤νΈ λ° κ²°κ³Όλ¬Ό νμΌλ΅ μ €μ¥ν•κΈ°
test-pipeline.ts νμΌμ— μ•„λμ™€ κ°™μ€ κµ¬μ΅°μ μ½”λ“λ¥Ό μ‘μ„±ν•μ—¬ ν• λ‹¨κ³„μ”© μ‹¤ν–‰ν•κ³ , κ° λ‹¨κ³„μ κ²°κ³Όλ¬Όμ„ .json νμΌλ΅ μ €μ¥ν•μ—¬ μ§μ ‘ ν™•μΈν•©λ‹λ‹¤.

μμ‹ test-pipeline.ts μ½”λ“:

TypeScript

// test-pipeline.ts

import fs from 'fs/promises';
import path from 'path';

// ν…μ¤νΈν•  μ„λΉ„μ¤ λ¨λ“λ“¤μ„ import ν•©λ‹λ‹¤.
import { parseKakaoTalk } from './services/kakao-parser';
import { filterWithGemini } from './services/gemini-filter';
import { summarizeAndProfile } from './services/gemini-batch-summary';
// ... λ‹¤λ¥Έ claude μ„λΉ„μ¤λ“¤λ„ ν•„μ”μ— λ”°λΌ import

// --------------------------------------------------
// β–Όβ–Όβ–Ό μ΄ ν•¨μ μ•μ—μ„ μ›ν•λ” λ‹¨κ³„λ§ μ£Όμ„μ„ ν’€μ–΄μ„ ν…μ¤νΈν•μ„Έμ”. β–Όβ–Όβ–Ό
// --------------------------------------------------
async function runTest() {
  try {
    // ν…μ¤νΈμ© λ€ν™” νμΌμ„ μ½μ–΄μµλ‹λ‹¤.
    const sampleChat = await fs.readFile(path.join(__dirname, 'sample.txt'), 'utf-8');
    
    // --- λ‹¨κ³„ 0: μΉ΄μΉ΄μ¤ν†΅ νμ„ ν…μ¤νΈ ---
    const parsedResult = parseKakaoTalk(sampleChat);
    await fs.writeFile('test_outputs/0_parsed.json', JSON.stringify(parsedResult, null, 2));
    console.log('β… 0λ‹¨κ³„: νμ‹± μ™„λ£. test_outputs/0_parsed.json ν™•μΈ');

    // --- λ‹¨κ³„ 1: Gemini ν•„ν„° ν…μ¤νΈ ---
    // const filteredResult = await filterWithGemini(parsedResult);
    // await fs.writeFile('test_outputs/1_filtered.json', JSON.stringify(filteredResult, null, 2));
    // console.log('β… 1λ‹¨κ³„: ν•„ν„°λ§ μ™„λ£. test_outputs/1_filtered.json ν™•μΈ');

    // --- λ‹¨κ³„ 2: Gemini ν”„λ΅νμΌλ¬ ν…μ¤νΈ ---
    // const profilerResult = await summarizeAndProfile(filteredResult); // λλ” 0_parsed.jsonμ„ μ§μ ‘ μ…λ ¥
    // await fs.writeFile('test_outputs/2_profiler.json', JSON.stringify(profilerResult, null, 2));
    // console.log('β… 2λ‹¨κ³„: ν”„λ΅νμΌλ§ μ™„λ£. test_outputs/2_profiler.json ν™•μΈ');

    // --- λ‹¨κ³„ 3: Claude μ‹¬μΈµλ¶„μ„ ν…μ¤νΈ ---
    // ... μ΄λ° μ‹μΌλ΅ λ‹¤μ λ‹¨κ³„λ¥Ό κ³„μ† ν…μ¤νΈ ...


  } catch (error) {
    console.error("ν…μ¤νΈ μ¤‘ μ¤λ¥ λ°μƒ:", error);
  }
}

// μ¤ν¬λ¦½νΈ μ‹¤ν–‰
runTest();
3. μ‹¤ν–‰ λ°©λ²• λ° κ°λ° μμ„
test_outputs ν΄λ” μƒμ„±: κ²°κ³Όλ¬Όμ΄ μ €μ¥λ  ν΄λ”λ¥Ό λ―Έλ¦¬ λ§λ“¤μ–΄ λ‘΅λ‹λ‹¤.

ν…μ¤νΈ νμΌ μ¤€λΉ„: μ‹¤μ  μΉ΄μΉ΄μ¤ν†΅ λ€ν™” λ‚΄μ©μ΄ λ‹΄κΈ΄ sample.txt νμΌμ„ server/ ν΄λ” μ•μ— λ„£μ–΄λ‘΅λ‹λ‹¤.

ν• λ²μ— ν• λ‹¨κ³„μ”© μ‹¤ν–‰:

μ²μμ—λ” "λ‹¨κ³„ 0" μ½”λ“λ§ λ‚¨κΈ°κ³  λ‚λ¨Έμ§€λ” λ¨λ‘ μ£Όμ„ μ²λ¦¬ν•©λ‹λ‹¤.

Replitμ Shell νƒ­μ—μ„ npx ts-node server/test-pipeline.ts λ…λ Ήμ–΄λ¥Ό μ…λ ¥ν•μ—¬ μ¤ν¬λ¦½νΈλ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.

test_outputs ν΄λ”μ— μƒμ„±λ 0_parsed.json νμΌμ„ μ—΄μ–΄ νμ‹±μ΄ μ›ν•λ” λ€λ΅ μ λμ—λ”μ§€ λμΌλ΅ ν™•μΈν•©λ‹λ‹¤.

μ μ§„μ μΌλ΅ λ‹¤μ λ‹¨κ³„ μ§„ν–‰:

0λ‹¨κ³„ κ²°κ³Όκ°€ λ§μ΅±μ¤λ¬μ°λ©΄, μ΄μ  "λ‹¨κ³„ 1" μ½”λ“μ μ£Όμ„μ„ ν•΄μ ν•©λ‹λ‹¤.

λ‹¤μ‹ μ¤ν¬λ¦½νΈλ¥Ό μ‹¤ν–‰ν•κ³ , μƒμ„±λ 1_filtered.json νμΌμ λ‚΄μ©μ΄ μ¬λ°”λ¥Έμ§€ ν™•μΈν•©λ‹λ‹¤. (κ°μΈμ •λ³΄κ°€ μ μ κ±°λμ—λ”μ§€ λ“±)

μ΄λ° λ°©μ‹μΌλ΅ Gemini ν”„λ΅νμΌλ§ -> Claude μ‹¬μΈµλ¶„μ„ -> Claude μ½”μΉ­ μμ„λ΅ κ° λ‹¨κ³„μ κ²°κ³Όλ¬Όμ„ .json νμΌλ΅ ν™•μΈν•λ©° μ§„ν–‰ν•©λ‹λ‹¤.